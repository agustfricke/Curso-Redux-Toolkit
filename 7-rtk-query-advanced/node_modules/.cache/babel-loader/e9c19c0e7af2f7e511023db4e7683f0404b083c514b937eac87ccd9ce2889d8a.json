{"ast":null,"code":"import { createEntityAdapter, createSelector } from \"@reduxjs/toolkit\";\nimport { apiSlice } from \"./apiSlice\";\nconst usersAdapter = createEntityAdapter();\nconst initialState = usersAdapter.getInitialState();\nexport const usersApiSlice = apiSlice.injectEndpoints({\n  endpoints: builder => ({\n    getUsers: builder.query({\n      query: () => '/users',\n      transformResponse: responseData => {\n        return usersAdapter.setAll(initialState, responseData);\n      },\n      providesTags: (result, error, arg) => [{\n        type: 'User',\n        id: 'LIST'\n      }, ...result.ids.map(id => ({\n        type: 'User',\n        id\n      }))]\n    })\n  })\n});\nexport const {\n  useGetUsersQuery\n} = usersApiSlice;\n\n// genera el objecto completo\nexport const selectUsersResult = usersApiSlice.endpoints.getUserss.select();\n\n// lo normalizamos\nexport const selectUsersData = createSelector(selectUsersResult, usersResult => usersResult.data);\nexport const {\n  selectAll: selectAllUsers,\n  selectById: selectUserById,\n  selectIds: selectUserIds\n} = usersAdapter.getSelectors(state => {\n  var _selectUsersData;\n  return (_selectUsersData = selectUsersData(state)) !== null && _selectUsersData !== void 0 ? _selectUsersData : initialState;\n});","map":{"version":3,"names":["createEntityAdapter","createSelector","apiSlice","usersAdapter","initialState","getInitialState","usersApiSlice","injectEndpoints","endpoints","builder","getUsers","query","transformResponse","responseData","setAll","providesTags","result","error","arg","type","id","ids","map","useGetUsersQuery","selectUsersResult","getUserss","select","selectUsersData","usersResult","data","selectAll","selectAllUsers","selectById","selectUserById","selectIds","selectUserIds","getSelectors","state","_selectUsersData"],"sources":["/home/agust/Cursos/Redux-Toolkit/71-rtk-query-advanced/src/features/usersSlice.js"],"sourcesContent":["import { createEntityAdapter, createSelector } from \"@reduxjs/toolkit\";\nimport { apiSlice } from \"./apiSlice\";\n\nconst usersAdapter = createEntityAdapter()\n\nconst initialState = usersAdapter.getInitialState()\n\nexport const usersApiSlice = apiSlice.injectEndpoints({\n    endpoints: builder => ({\n        getUsers: builder.query({\n            query: () => '/users',\n            transformResponse: responseData => {\n                return usersAdapter.setAll(initialState, responseData)\n            },\n            providesTags: (result, error, arg) => [\n                { type: 'User', id: 'LIST' },\n                ...result.ids.map(id => ({ type: 'User', id }))\n            ]\n        })\n    })\n})\n\nexport const { useGetUsersQuery } = usersApiSlice\n\n// genera el objecto completo\nexport const selectUsersResult = usersApiSlice.endpoints.getUserss.select()\n\n// lo normalizamos\nexport const selectUsersData = createSelector(\n    selectUsersResult,\n    usersResult => usersResult.data\n)\n\nexport const {\n    selectAll: selectAllUsers,\n    selectById: selectUserById,\n    selectIds: selectUserIds,\n} = usersAdapter.getSelectors(state => selectUsersData(state) ?? initialState)\n\n"],"mappings":"AAAA,SAASA,mBAAmB,EAAEC,cAAc,QAAQ,kBAAkB;AACtE,SAASC,QAAQ,QAAQ,YAAY;AAErC,MAAMC,YAAY,GAAGH,mBAAmB,EAAE;AAE1C,MAAMI,YAAY,GAAGD,YAAY,CAACE,eAAe,EAAE;AAEnD,OAAO,MAAMC,aAAa,GAAGJ,QAAQ,CAACK,eAAe,CAAC;EAClDC,SAAS,EAAEC,OAAO,KAAK;IACnBC,QAAQ,EAAED,OAAO,CAACE,KAAK,CAAC;MACpBA,KAAK,EAAEA,CAAA,KAAM,QAAQ;MACrBC,iBAAiB,EAAEC,YAAY,IAAI;QAC/B,OAAOV,YAAY,CAACW,MAAM,CAACV,YAAY,EAAES,YAAY,CAAC;MAC1D,CAAC;MACDE,YAAY,EAAEA,CAACC,MAAM,EAAEC,KAAK,EAAEC,GAAG,KAAK,CAClC;QAAEC,IAAI,EAAE,MAAM;QAAEC,EAAE,EAAE;MAAO,CAAC,EAC5B,GAAGJ,MAAM,CAACK,GAAG,CAACC,GAAG,CAACF,EAAE,KAAK;QAAED,IAAI,EAAE,MAAM;QAAEC;MAAG,CAAC,CAAC,CAAC;IAEvD,CAAC;EACL,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEG;AAAiB,CAAC,GAAGjB,aAAa;;AAEjD;AACA,OAAO,MAAMkB,iBAAiB,GAAGlB,aAAa,CAACE,SAAS,CAACiB,SAAS,CAACC,MAAM,EAAE;;AAE3E;AACA,OAAO,MAAMC,eAAe,GAAG1B,cAAc,CACzCuB,iBAAiB,EACjBI,WAAW,IAAIA,WAAW,CAACC,IAAI,CAClC;AAED,OAAO,MAAM;EACTC,SAAS,EAAEC,cAAc;EACzBC,UAAU,EAAEC,cAAc;EAC1BC,SAAS,EAAEC;AACf,CAAC,GAAGhC,YAAY,CAACiC,YAAY,CAACC,KAAK;EAAA,IAAAC,gBAAA;EAAA,QAAAA,gBAAA,GAAIX,eAAe,CAACU,KAAK,CAAC,cAAAC,gBAAA,cAAAA,gBAAA,GAAIlC,YAAY;AAAA,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}