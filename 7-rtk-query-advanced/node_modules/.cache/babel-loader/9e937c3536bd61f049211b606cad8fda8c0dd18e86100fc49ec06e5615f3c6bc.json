{"ast":null,"code":"var _jsxFileName = \"/home/agust/Cursos/Redux-Toolkit/7-rtk-query-advanced/src/components/EditPost.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { selectPostById } from \"../features/postsSlice\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useUpdatePostMutation, useDeletePostMutation } from \"../features/postsSlice\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditPost = () => {\n  _s();\n  const {\n    postId\n  } = useParams();\n  const navigate = useNavigate();\n  const [updatePost, {\n    isLoading\n  }] = useUpdatePostMutation();\n  const [deletePost] = useDeletePostMutation();\n  const post = useSelector(state => selectPostById(state, Number(postId)));\n  const [body, setBody] = useState(post === null || post === void 0 ? void 0 : post.body);\n  const onBodyChange = e => setBody(e.target.value);\n  const canSave = Boolean(body) && !isLoading;\n  const onSavePost = async () => {\n    if (canSave) {\n      try {\n        await updatePost({\n          id: post.id,\n          body\n        }).unwrap();\n        setBody('');\n        navigate('/');\n      } catch (err) {\n        console.error('Failed', err);\n      }\n    }\n  };\n  const onDeletePost = async () => {\n    try {\n      await deletePost({\n        id: post.id\n      }).unwrap();\n      navigate('/');\n    } catch (err) {\n      console.error('Failed', err);\n    }\n  };\n  if (!post) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" No posts here! \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      value: body,\n      onChange: onBodyChange,\n      placeholder: \"Add New Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: onSavePost,\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: onDeletePost,\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(EditPost, \"iypPT09DLoRbY3gtc9rUqIl0Ico=\", false, function () {\n  return [useParams, useNavigate, useUpdatePostMutation, useDeletePostMutation, useSelector];\n});\n_c = EditPost;\nexport default EditPost;\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["useState","selectPostById","useParams","useNavigate","useUpdatePostMutation","useDeletePostMutation","useSelector","jsxDEV","_jsxDEV","EditPost","_s","postId","navigate","updatePost","isLoading","deletePost","post","state","Number","body","setBody","onBodyChange","e","target","value","canSave","Boolean","onSavePost","id","unwrap","err","console","error","onDeletePost","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","type","onClick","_c","$RefreshReg$"],"sources":["/home/agust/Cursos/Redux-Toolkit/7-rtk-query-advanced/src/components/EditPost.js"],"sourcesContent":["import { useState } from \"react\";\nimport { selectPostById } from \"../features/postsSlice\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useUpdatePostMutation, useDeletePostMutation } from \"../features/postsSlice\";\nimport { useSelector } from \"react-redux\";\n\nconst EditPost = () => {\n\n    const { postId } = useParams()\n\n    const navigate = useNavigate()\n\n    const [updatePost, {isLoading}] = useUpdatePostMutation();\n    const [deletePost] = useDeletePostMutation()\n\n    const post = useSelector((state) => selectPostById(state, Number(postId)))\n\n\n    const [body, setBody] = useState(post?.body)\n    \n    const onBodyChange = e => setBody(e.target.value)\n\n    const canSave = Boolean(body) && !isLoading\n\n    const onSavePost = async () => {\n        if (canSave) {\n            try {\n                await updatePost({ id: post.id, body }).unwrap()\n                setBody('')\n                navigate('/')\n            } catch (err) {\n                console.error('Failed', err)\n            }\n        }\n    }\n\n    const onDeletePost = async () => {\n        try {\n            await deletePost({ id:post.id }).unwrap() \n            navigate('/')\n        } catch (err) {\n            console.error('Failed', err)\n        } \n    }\n    \n    if (!post) {\n        return (\n            <div> \n                <p> No posts here! </p>     \n            </div>\n        )\n    }\n    return (\n\n        <form>\n            <input value={body} onChange={onBodyChange} placeholder=\"Add New Post\"/>\n            <button type='button' onClick={onSavePost}>Edit</button>\n            <button type='button' onClick={onDeletePost}>Delete</button>\n        </form>\n    )\n}\nexport default EditPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}